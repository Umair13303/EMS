<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

<div class="row">
    <div class="col-lg-3">
        <div class="card text-center shadow-sm">
            <div class="card-body">
                <i class="uil uil-building text-primary fs-1 mb-2"></i>
                <h6 class="text-uppercase mb-1">Total Branches</h6>
                <h2 class="fw-bold" id="branch-count">@ViewBag.TotalBranches</h2>
                <p class="text-muted small mb-0">Active across regions</p>
            </div>
        </div>
    </div>
    <div class="col-lg-3">
        <div class="card text-center shadow-sm">
            <div class="card-body">
                <i class="uil uil-users-alt text-success fs-1 mb-2"></i>
                <h6 class="text-uppercase mb-1">Total User</h6>
                <h2 class="fw-bold" id="student-count">@ViewBag.TotalUser</h2>
                <p class="text-muted small mb-0">This academic year</p>
            </div>
        </div>
    </div>

    <div class="col-lg-3">
        <div class="card text-center shadow-sm">
            <div class="card-body">
                <i class="uil uil-user-check text-info fs-1 mb-2"></i>
                <h6 class="text-uppercase mb-1">Active Teachers</h6>
                <h2 class="fw-bold" id="teacher-count">132</h2>
                <p class="text-muted small mb-0">Full-time staff</p>
            </div>
        </div>
    </div>

    <div class="col-lg-3">
        <div class="card text-center shadow-sm">
            <div class="card-body">
                <i class="uil uil-wallet text-warning fs-1 mb-2"></i>
                <h6 class="text-uppercase mb-1">Pending Fees</h6>
                <h2 class="fw-bold" id="pending-fees">₨ 1.8M</h2>
                <p class="text-muted small mb-0">As of this month</p>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-lg-8">
        <div class="card card-h-100">
            <div class="card-body">
                <h4 class="header-title mb-3">Admissions Overview</h4>
                <div id="admissions-chart" class="apex-charts" style="height:320px"></div>
            </div>
        </div>
    </div>

    <div class="col-lg-4">
        <div class="card card-h-100">
            <div class="card-body">
                <h4 class="header-title mb-3">Student Performance</h4>
                <div id="performance-pie" class="apex-charts" style="height:320px"></div>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-lg-6">
        <div class="card card-h-100">
            <div class="card-body">
                <h4 class="header-title mb-3">Fee Collection Trend</h4>
                <div id="fees-trend" class="apex-charts" style="height:320px"></div>
            </div>
        </div>
    </div>

    <div class="col-lg-6">
        <div class="card card-h-100">
            <div class="card-body">
                <h4 class="header-title mb-3">Attendance Summary</h4>
                <div id="attendance-bar" class="apex-charts" style="height:320px"></div>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-12">
        <div class="card">
            <div class="card-body d-flex justify-content-between align-items-center">
                <h4 class="mb-0">Recent Notifications</h4>
                <button class="btn btn-outline-primary btn-sm" id="refresh-notifications">Refresh</button>
            </div>
            <div class="card-body">
                <ul id="notifications-list" class="list-group small">
                    <li class="list-group-item">Grade 10 result announced.</li>
                    <li class="list-group-item">Science Fair scheduled for Nov 12.</li>
                    <li class="list-group-item">Fee due reminder sent to 42 parents.</li>
                    <li class="list-group-item">New teacher orientation completed.</li>
                </ul>
            </div>
        </div>
    </div>
</div>



<script>
    document.addEventListener("DOMContentLoaded", function () {

        // Admissions Overview (Line Chart)
        var optionsAdmissions = {
            chart: { type: 'line', height: 320, toolbar: { show: false } },
            stroke: { curve: 'smooth', width: 3 },
            series: [{
                name: 'Admissions',
                data: [120, 160, 180, 200, 240, 280, 260, 310, 340, 400, 380, 420]
            }],
            xaxis: {
                categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                labels: { style: { colors: '#6c757d' } }
            },
            colors: ['#727cf5'],
            dataLabels: { enabled: false },
            yaxis: { labels: { style: { colors: '#6c757d' } } },
            grid: { borderColor: '#f1f3fa' }
        };
        new ApexCharts(document.querySelector("#admissions-chart"), optionsAdmissions).render();

        // Student Performance (Pie Chart)
        var optionsPerformance = {
            chart: { type: 'donut', height: 320 },
            labels: ['A Grade', 'B Grade', 'C Grade', 'D Grade'],
            series: [44, 30, 18, 8],
            colors: ['#0acf97', '#727cf5', '#fa5c7c', '#ffbc00'],
            legend: { position: 'bottom' }
        };
        new ApexCharts(document.querySelector("#performance-pie"), optionsPerformance).render();

        // Fee Collection Trend (Area Chart)
        var optionsFees = {
            chart: { type: 'area', height: 320, toolbar: { show: false } },
            series: [{
                name: 'Fees Collected',
                data: [120000, 150000, 180000, 210000, 190000, 220000, 250000, 260000, 230000, 280000, 290000, 300000]
            }],
            colors: ['#39afd1'],
            fill: { type: 'gradient', gradient: { opacityFrom: 0.6, opacityTo: 0.1 } },
            stroke: { curve: 'smooth', width: 2 },
            xaxis: {
                categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                labels: { style: { colors: '#6c757d' } }
            },
            yaxis: {
                labels: {
                    formatter: function (val) { return "₨ " + val.toLocaleString(); },
                    style: { colors: '#6c757d' }
                }
            },
            grid: { borderColor: '#f1f3fa' }
        };
        new ApexCharts(document.querySelector("#fees-trend"), optionsFees).render();

        // Attendance Summary (Bar Chart)
        var optionsAttendance = {
            chart: { type: 'bar', height: 320, toolbar: { show: false } },
            plotOptions: {
                bar: { columnWidth: '50%', borderRadius: 4 }
            },
            series: [{
                name: 'Attendance %',
                data: [92, 85, 88, 94, 90, 87, 93, 91, 89]
            }],
            xaxis: {
                categories: ['Nursery', 'KG', 'Grade 1', 'Grade 2', 'Grade 3', 'Grade 4', 'Grade 5', 'Grade 6', 'Grade 7'],
                labels: { style: { colors: '#6c757d' } }
            },
            colors: ['#0acf97'],
            yaxis: {
                max: 100,
                labels: { style: { colors: '#6c757d' } }
            },
            grid: { borderColor: '#f1f3fa' }
        };
        new ApexCharts(document.querySelector("#attendance-bar"), optionsAttendance).render();

    });
</script>
