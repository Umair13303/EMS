@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<script src="~/Scripts/angular.min.js"></script>
<script src="~/Common/CommonScripts/AngularService/GlobalServices.js"></script>
<script src="~/Areas/Account/Scripts/PCRReportManagment_UI_Script/View_PCRLedger_UI_Presenter.js"></script>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@500;700&display=swap" rel="stylesheet">

<style>
    :root {
        --bg-main: #f8fafc;
        --card-bg: #ffffff;
        --text-main: #0f172a;
        --text-muted: #64748b;
        --emerald: #10b981;
        --rose: #f43f5e;
        --indigo: #6366f1;
    }

    body {
        font-family: 'Inter', sans-serif;
        background-color: var(--bg-main);
        color: var(--text-main);
    }

    /* Modern KPI Cards - No Borders, Soft Shadows */
    .summary-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
    }

    .stat-card {
        background: var(--card-bg);
        padding: 24px;
        border-radius: 16px;
        box-shadow: 0 1px 3px rgba(0,0,0,0.02), 0 10px 15px -3px rgba(0,0,0,0.03);
        transition: transform 0.2s;
    }

    .stat-label {
        font-size: 12px;
        font-weight: 600;
        color: var(--text-muted);
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .stat-value {
        font-size: 20px;
        font-weight: 800;
        margin-top: 8px;
        font-family: 'JetBrains Mono', monospace;
    }

    /* The Table: Modern Fintech Style */
    .ledger-container {
        background: var(--card-bg);
        border-radius: 20px;
        box-shadow: 0 20px 25px -5px rgba(0,0,0,0.04);
        padding: 10px;
    }

    .table-ledger {
        border-collapse: collapse;
        width: 100%;
        margin-top: 5px;
    }

        .table-ledger thead th {
            padding: 16px 20px;
            text-align: left;
            font-size: 12px;
            font-weight: 600;
            color: var(--text-muted);
            border-bottom: 1px solid #f1f5f9;
        }

        .table-ledger tbody tr {
            border-bottom: 1px solid #f8fafc;
            transition: background 0.2s;
        }

            .table-ledger tbody tr:hover {
                background-color: #f1f5f9;
                cursor: default;
            }

        .table-ledger td {
            padding: 18px 20px;
            vertical-align: middle;
        }

    /* Money Typography */
    .mono {
        font-family: 'JetBrains Mono', monospace;
        font-variant-numeric: tabular-nums;
        letter-spacing: -0.5px;
    }

    .val-credit {
        color: var(--emerald);
        font-weight: 600;
    }

    .val-debit {
        color: var(--rose);
        font-weight: 600;
    }

    .val-balance {
        color: var(--text-main);
        font-weight: 700;
    }

    /* Clean Pill Badges */
    .ref-pill {
        background: #f1f5f9;
        color: #475569;
        padding: 2px 8px;
        border-radius: 6px;
        font-size: 11px;
        font-weight: 500;
        margin-top: 4px;
        display: inline-block;
    }

    /* Toolbar Styling */
    .toolbar {
        background: white;
        padding: 16px;
        border-radius: 16px;
        margin-bottom: 24px;
        display: flex;
        gap: 12px;
        align-items: center;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
    }

    .modern-input {
        border: 1px solid #e2e8f0;
        padding: 8px 16px;
        border-radius: 10px;
        font-size: 13px;
        outline: none;
        transition: border-color 0.2s;
    }

        .modern-input:focus {
            border-color: var(--indigo);
        }
</style>
<div class="statbox widget box box-shadow">
    <div class="widget-header">
        <div class="row">
            <div class="col-xl-12 col-md-12 col-sm-12 col-12">
                <h4>@ViewBag.Title</h4>
            </div>
        </div>
        <nav class="breadcrumb-one" aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="javascript:void(0);"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-home"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg></a></li>
                <li class="breadcrumb-item"><a href="javascript:void(0);">Accounts</a></li>
                <li class="breadcrumb-item"><a href="javascript:void(0);">Petty Cash Register</a></li>
                <li class="breadcrumb-item active" aria-current="page"><span>Ledger</span></li>
            </ol>
        </nav>
    </div>
</div>
<div ng-app="View_PCRLedger_UI" ng-controller="View_PCRLedger_UIController" class="p-4">
    <div class="statbox widget box box-shadow">
        <div class="summary-grid">
            <div class="stat-card">
                <div class="stat-label">Opening</div>
                <div class="stat-value text-muted">{{PCRKPISummary.Opening | number:2}}</div>
            </div>
            <div class="stat-card">
                <div class="stat-label" style="color: var(--emerald)">Inflow (+)</div>
                <div class="stat-value val-credit">{{PCRKPISummary.Credit | number:2}}</div>
            </div>
            <div class="stat-card">
                <div class="stat-label" style="color: var(--rose)">Outflow (-)</div>
                <div class="stat-value val-debit">{{PCRKPISummary.Debit | number:2}}</div>
            </div>
            <div class="stat-card" style="background: var(--text-main);">
                <div class="stat-label" style="color: rgba(255,255,255,0.5)">Net Balance</div>
                <div class="stat-value text-white">{{PCRKPISummary.Closing | number:2}}</div>
            </div>
        </div>

        <div class="toolbar">
            <div class="d-flex align-items-center gap-2">
                <input type="date" class="modern-input" ng-model="DataTableSetting.Filter.StartDate" date-picker-simple>
                <span class="text-muted small">to</span>
                <input type="date" class="modern-input" ng-model="DataTableSetting.Filter.EndDate" date-picker-simple>
            </div>
            <div class="vr mx-2" style="height: 20px;"></div>
            <div class="flex-grow-1">
                <input type="text" class="modern-input w-100" placeholder="Search by description or reference..." ng-model="DataTableSetting.Filter.Search" ng-change="RefreshUI()">
            </div>
            <button class="btn btn-dark btn-sm rounded-3 px-4" ng-click="Initialize()" style="height: 38px;">
                Search
            </button>
        </div>

        <div class="ledger-container">
            <table class="table-ledger">
                <thead>
                    <tr>
                        <th style="width: 15%">Date</th>
                        <th style="width: 45%">Description</th>
                        <th style="width: 13%; text-align: right;">Credit</th>
                        <th style="width: 13%; text-align: right;">Debit</th>
                        <th style="width: 14%; text-align: right;">Balance</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="item in PCRLedgerList">
                        <td>
                            <div>{{item.TransactionDate | date:'dd-MMM-yyyy'}}</div>
                        </td>
                        <td>
                            <div style="color: var(--text-main);">{{item.Description}}</div>
                            <div ng-if="item.Code" class="ref-pill">#{{item.Code}}</div>
                        </td>
                        <td class="mono val-credit" style="text-align: right;">
                            {{item.Credit > 0 ? (item.Credit | number:2) : '—'}}
                        </td>
                        <td class="mono val-debit" style="text-align: right;">
                            {{item.Debit > 0 ? (item.Debit | number:2) : '—'}}
                        </td>
                        <td class="mono val-balance" style="text-align: right;">
                            {{item.Balance | number:2}}
                        </td>
                    </tr>
                </tbody>
            </table>

            <div class="d-flex justify-content-between align-items-center p-4">
                <span class="text-muted small">Showing page <b>{{DataTableSetting.DefaultPage + 1}}</b></span>
                <div class="d-flex gap-2">
                    <button class="btn btn-light btn-sm rounded-2 px-3" ng-disabled="DataTableSetting.DefaultPage == 0" ng-click="SetPage(-1)">Previous</button>
                    <button class="btn btn-light btn-sm rounded-2 px-3" ng-disabled="DataTableSetting.DefaultPage >= DataTableSetting.TotalPage - 1" ng-click="SetPage(1)">Next</button>
                </div>
            </div>
        </div>
    </div>
</div>

